import os
from pathlib import Path

# =========================================================
# 🏭 AI Novel Factory: Strategy File Generator (Apocalypse Edition)
# 역할: 아포칼립스 장르의 심층 분석 데이터를 AI 최적화 규격서로 변환
# 타겟: 00_기준정보_보물창고/04_설정_트랜드/B_현대판타지_1950_2026
# =========================================================

# 1. 저장 위치 설정
CURRENT_DIR = Path.cwd()
TARGET_DIR = CURRENT_DIR / "00_기준정보_보물창고" / "04_설정_트랜드" / "B_현대판타지_1950_2026"

os.makedirs(TARGET_DIR, exist_ok=True)

FILE_NAME = "2026_Apocalypse_Trend_Strategy.md"
FILE_PATH = TARGET_DIR / FILE_NAME

# 2. 내용 작성 (Markdown + System Meta-Instruction)
content = """# 2025-2026 아포칼립스 웹소설 구조적 분석 및 필승 전략

> **[System Meta-Instruction for AI Agents]**
> 본 문서는 아포칼립스(Apocalypse) 및 재난물 기획의 **절대 가이드라인(Master Guideline)**입니다.
> Creative Planner는 단순 생존 서사를 지양하고, 본 문서의 **'지능형 인지 프레임워크'**와 **'사회 재건/이능력 융합'** 키워드를 필수로 반영하십시오.
> Red Team은 **'단순 좀비물'**이나 **'개연성 없는 악당'**이 등장하는 기획안을 **'Outdated'**로 판정하여 반려하십시오.

---

## 1. 장르 패러다임 변화 (Paradigm Shift)
* **과거:** 물리적 생존, 좀비 학살, 무정부 상태의 혼란.
* **현재 (2026):** **사회적 재건(Reconstruction)** + **이능력의 체계화** + **장르 융합**.
* **핵심 정서:** 공포가 아닌 **'정복과 지배'**의 카타르시스. "무너진 세상에서 나만의 규칙을 세운다."

---

## 2. [Cognitive Framework] 8대 지능형 작법론
AI는 기획 시 다음 8가지 사고 구조를 적용해야 한다.

1.  **Tree of Thoughts (ToT):** 선택의 기로에서 '정면 돌파', '전략적 후퇴', '의외의 협력' 3가지 경로를 시뮬레이션 후 최적안 선택.
2.  **Self-Reflection:** 주인공은 자신의 행동에 대한 도덕적/사회적 파장을 성찰해야 함. (예: "마도가 순리라면 나는 무엇을 지키는가?")
3.  **Meta-Prompting:** 상태창과 시스템은 단순 알림판이 아니라, 독자에게 규칙을 설명하는 메타 장치임.
4.  **RAG (Information):** 회귀/빙의 주인공의 '미래 지식'은 RAG 데이터베이스와 같다. 정보 우위로 압살할 것.
5.  **Reason & Act:** 스킬 사용과 결과에는 논리적 수식($P(success)$)이 존재해야 함.
6.  **Role-playing:** 조연들의 역할(츤데레, 충직한 부하)을 명확히 설정.
7.  **Few-shot:** 낯선 설정은 익숙한 비유(예: 마법 = 전술핵)로 설명.
8.  **Chain of Thought (CoT):** 주인공의 사고 과정을 단계별로 노출하여 '지능형 주인공'임을 증명.

---

## 3. [Trend Matrix] 5대 핵심 클리셰 카테고리

### ⚔️ 1. 퓨전 아포칼립스 (무협/선협)
* **키워드:** **천마 아포칼립스**. "마도(魔道)가 자연의 섭리가 되었다."
* **포인트:** 총기가 안 통하는 괴수를 무공으로 찢어버리는 이질적 쾌감.

### 🧠 2. 캐릭터 변주 (시한부/착각)
* **키워드:** **시한부 천재**, **착각계**.
* **포인트:** 페널티(시한부) 대신 얻은 초월적 재능. 주인공의 사소한 행동을 '외신의 뜻'으로 오해하는 주변인.

### 🎮 3. 시스템/게임 실체화
* **키워드:** 턴제 시스템, 아카데미.
* **포인트:** 현실 전투에 '턴제 규칙'이나 '공략법'을 적용하여 전략성 강화.

### 👻 4. 괴담/규칙 서사
* **키워드:** **괴담 동아리**, **SCP 재단식 가이드**.
* **포인트:** 힘싸움이 아닌, **'규칙(Rule)'**을 지키거나 비틀어서 생존하는 지적 유희.

### 🏗️ 5. 재건 (Post-Recovery)
* **키워드:** 영주물, 무역.
* **포인트:** 파괴된 도시를 거점으로 삼아 문명을 다시 세우고 경제권을 장악.

---

## 4. [Data & Settings] 세계관 구축 가이드

### 4.1 몬스터 트렌드 (Monster Trend)
* **Out:** 전형적인 좀비, 멍청한 레이더(약탈자).
* **In:** **지성 있는 괴수**, **외신(Outer God)**, 시스템 처벌자.

### 4.2 남성향/여성향 융합 (Romance Elements)
* **남주:** 북부 대공 스타일(흑발 냉미남) + 여주 한정 헌신(밥 챙겨줌).
* **관계:** 악역 빙의 후 원작 여주와 '전략적 베프' 결성.

---

## 5. [Action Plan] 실전 집필 예시 (CoT Simulation)

### Case: 천마가 현대 총기 부대를 만났을 때
1.  **[Thought]:** "저 쇠막대기(총)는 화약을 쓴다. 탄환 속도는 빠르지만, 손가락 움직임은 느리다."
2.  **[Reasoning]:** "마기를 대기에 뿌려 굴절시키면 탄환은 빗나간다."
3.  **[Act]:** 순식간에 접근하여 총구를 구겨버린다.
4.  **[Dialogue]:** "이것이 너희가 믿는 신뢰인가? 가냘프구나."

### Case: 시한부 천재의 시스템 활용
1.  **[System]:** [경고: 생명 연소 스킬 활성화. 남은 수명 72시간.]
2.  **[Reaction]:** 서늘한 미소. "72시간이라. 세상을 뒤엎기엔 충분하군."

---

## 6. [Red Team Checklist] 검열 기준
* Q1. 이유 없이 주인공을 괴롭히는 평면적 악당이 나오는가? (-> **Reject**)
* Q2. 방문하는 곳마다 다 파괴되고 끝나는가? (-> **Reject**. 재건/유지가 있어야 함)
* Q3. 설정을 설명하느라 1화를 통째로 썼는가? (-> **Reject**. 사건 속에서 보여줄 것)

---
> **[Final Summary for AI]**
> 2026년 아포칼립스는 **"멸망의 기록이 아니라, 새로운 지배자의 탄생기"**입니다.
> 데이터를 믿고, 논리(Logic)로 무장하며, 독자를 주인공의 성찰에 공감하게 만드십시오.
"""

# 3. 파일 쓰기
try:
    with open(FILE_PATH, "w", encoding="utf-8") as f:
        f.write(content)
    print(f"✅ [Success] 아포칼립스 전략 보고서 생성 완료!")
    print(f"📍 저장 위치: {FILE_PATH}")
    print(f"📄 파일 크기: {len(content)} bytes")
    print("👉 이제 AI는 '좀비' 대신 '천마'와 '규칙'을 먼저 떠올릴 것입니다.")
except Exception as e:
    print(f"❌ [Error] 파일 생성 실패: {e}")